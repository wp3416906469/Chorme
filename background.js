!function(e){function t(t){for(var n,i,c=t[0],s=t[1],u=t[2],p=0,f=[];p<c.length;p++)i=c[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(l&&l(t);f.length;)f.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,c=1;c<r.length;c++){var s=r[c];0!==o[s]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={3:0,21:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;a.push([1159,0]),r()}({11:function(e,t,r){"use strict";r.d(t,"k",(function(){return n})),r.d(t,"l",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return c})),r.d(t,"n",(function(){return s})),r.d(t,"f",(function(){return u})),r.d(t,"j",(function(){return l})),r.d(t,"g",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"i",(function(){return m})),r.d(t,"h",(function(){return d})),r.d(t,"d",(function(){return g})),r.d(t,"m",(function(){return h}));r(26),r(22),r(39),r(50),r(72),r(97),r(17),r(24),r(90),r(41),r(51),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(115),r(222);function n(e,t){if("string"!=typeof e)return t||!1;try{return JSON.parse(e)}catch(e){return console.info(e),t||!1}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{window.csdn.report.reportClick(e)}catch(e){console.info(e)}}function a(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e),n.onerror=function(){r(new Error("blobToBase64 error"))}}))}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r){function n(){var e=this.files[0];if(t.maxSize&&e.size>t.maxSize)r({code:0,message:"图片大小需不超过".concat(t.maxSize/1024/1024,"MB")});else{var n=new FileReader;n[t.type||"readAsDataURL"](e),n.onload=function(e){var t;t="object"==typeof e.target.result?window.URL.createObjectURL(new Blob([e.target.result])):e.target.result,r({code:200,data:t})}}}e=e||"image/jpg,image/jpeg,image/png,image/gif,image/bmp,image/webp,image/svg";var o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept",e),o.value="",o.removeEventListener("change",n,!1),o.addEventListener("change",n,!1),o.click()}))}function c(e){e=e.split(",");for(var t=atob(e[1]),r=t.length,n=new ArrayBuffer(r),o=new Uint8Array(n),a=0;a<r;a++)o[a]=t.charCodeAt(a);var i=new Blob([o],{type:e[0].split(":")[1].split(";")[0]});return URL.createObjectURL(i)}function s(e){return new Promise((function(t,r){var n=new Image;n.setAttribute("crossOrigin","Anonymous"),n.onload=function(){var e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(n,0,0,n.width,n.height);var r=e.toDataURL("image/png");t(r)},n.src=e,n.onerror=function(){r(new Error("图片流异常"))}}))}function u(e){var t,r=[];for(var n in e)r.push("".concat(n,"=").concat((t=e[n],t=(t=(t=(t=(t=(t=(t=(t=(t+="").replace(/%/g,"%25")).replace(/\+/g,"%2B")).replace(/ /g,"%20")).replace(/\//g,"%2F")).replace(/\?/g,"%3F")).replace(/&/g,"%26")).replace(/\=/g,"%3D")).replace(/#/g,"%23"))));return r.join("&")}var l="undefined"!=typeof chrome&&void 0!==chrome.storage;function p(e){for(var t=document.cookie.split("; "),r=0;r<t.length;r++){var n=t[r].split("=");if(n[0]===e)return decodeURIComponent(n[1])}}var f=function e(t,r){return t.reduce((function(t,n){var o=r&&n&&n[r]||n;return t.concat(Array.isArray(o)?e(o,r):n)}),[]).filter((function(e){return e}))},m=function(e,t){if("[object Array]"!==Object.prototype.toString.call(e)||"number"!=typeof t)return[];for(var r=0,n=[];r<e.length;)n.push(e.slice(r,r+=t));return n},d=function(){var e=window.performance,t={},r={};return e?(e.getEntriesByType("navigation").length>0?(r=e.getEntriesByType("navigation")[0],t.loadPage=r.loadEventEnd,t.domComplete=r.domContentLoadedEventEnd):(r=e.timing,t.loadPage=r.loadEventEnd-r.navigationStart,t.domComplete=r.domComplete-r.domLoading),t):(console.log("不支持Performance"),"")},g=function(){var e=document.createElement("link"),t=window.navigator.userAgent.toLowerCase(),r=t.indexOf("edg")>-1||t.indexOf("edge")>-1;e.setAttribute("rel","SHORTCUT ICON"),e.setAttribute("href",r?"/images/favicon_newtab.png":"/images/favicon.ico"),document.head.appendChild(e)},h=function(){var e={};return location.href.split("?").length>1&&location.href.split("?")[1].replace(/([^?&=]+)=([^?&=]+)/g,(function(){e[arguments[1]]=decodeURIComponent(arguments[2])})),e}},1159:function(e,t,r){"use strict";r.r(t);r(17),r(90);var n={contextMenuId:null},o={_removeContextMenu:function(){n.contextMenuId&&(chrome.contextMenus.remove(n.contextMenuId),n.contextMenuId=null)},initContextMenu:function(){this._removeContextMenu(),n.contextMenuId=chrome.contextMenus.create({title:"CSDN 搜索",contexts:["selection","editable","link","image"],documentUrlPatterns:["http://*/*","https://*/*","file://*/*"],onclick:function(e,t){chrome.tabs.executeScript(t.id,{code:"("+function(e){return e.selectionText}.toString()+")("+JSON.stringify(e)+")",allFrames:!1},(function(e){e="object"==typeof e?e[0]:e,chrome.tabs.create({url:"https://so.csdn.net/so/search/s.do?from=chrome_plugin&q="+(e||""),active:!0},(function(){}))}))}})}},a=(r(26),r(22),r(168),r(167),r(39),r(50),r(170),r(24),r(41),r(51),r(115),r(75),r(125));r(37),r(28),r(169),r(60),r(224),r(42),r(32),r(72);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(){return chrome.runtime.lastError};function l(e){try{window.csdn&&window.csdn.report&&window.csdn.report.reportView(e)}catch(e){}}var p=function(e){chrome.storage.local.get("installChannel",(function(t){t.installChannel||new Promise((function(e){chrome.cookies.getAll({url:"https://csdn.net"},(function(t){e(t.reduce((function(e,t){return"plugin-activity-inviter"===t.name&&(e=t.value),e}),""))}))})).then((function(t){var r={extra:JSON.stringify({installDate:+new Date+"",uuid:e})};t&&l(c(c({},r),{},{inviter:t,spm:"1021.2146.3001.6423"})),l(c(c({},r),{},{inviter:t,spm:"1021.2146.3001.6422"})),chrome.storage.local.set({installChannel:"".concat(e,"-").concat(t)},u)}))}))};function f(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=chrome.runtime.getManifest(),w=function(e){for(var t=[],r=["0","1","2","3","4","5","6","7","8","9"],n=0;n<e;n++){var o=Math.floor(10*Math.random());t[n]=r[o]}return t.join("")},j=function(){var e=function(){return chrome.runtime.lastError};try{if(chrome.storage.local.get("installUUID",(function(t){t.installUUID&&chrome.cookies.set({url:"https://csdn.net",domain:".csdn.net",expirationDate:31536e3+~~(+new Date/1e3),name:"pluginUUID",value:t.installUUID},e)})),chrome.runtime.getURL){var t=chrome.runtime.getURL("/").split("//")[1];chrome.cookies.set({url:"https://csdn.net",domain:".csdn.net",expirationDate:31536e3+~~(+new Date/1e3),name:"pluginId",value:t.substring(0,t.length-1)},e)}y.version&&chrome.cookies.set({url:"https://csdn.net",domain:".csdn.net",expirationDate:31536e3+~~(+new Date/1e3),name:"pluginVersion",value:y.version},e)}catch(e){console.log("set cookie error")}},x=function(e){chrome.runtime.onInstalled.addListener((function(e){var t=e.reason;["chrome_update","shared_module_update"].includes(t)||chrome.storage.local.set({installDate:(new Date).toString()}),chrome.storage.local.get("installUUID",(function(e){var t="10_".concat(w(11),"-").concat(+new Date,"-").concat(w(6));e.installUUID?(t=e.installUUID,j()):chrome.storage.local.set({installUUID:t},(function(){p(t),j()}))}))}))};function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){A(a,n,o,i,c,"next",e)}function c(e){A(a,n,o,i,c,"throw",e)}i(void 0)}))}}var R=window.Settings||{},M=function(){return new Promise((function(e){chrome.storage.local.get(["insertTabsData"],(function(t){var r=("string"==typeof t.insertTabsData&&t.insertTabsData?JSON.parse(t.insertTabsData):t.insertTabsData)||[];e(r)}))}))},T=function(){var e=D(regeneratorRuntime.mark((function e(){var t,r,n,o,a,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:["webPage","inject","iframe"],r={},n=[],t.indexOf("iframe")>-1&&(r=R.get("iframeMap"),n=Object.keys(r)),o=t.indexOf("webPage")>-1&&R.get("webPagesMap")||[],a=[],!(t.indexOf("inject")>-1)){e.next=10;break}return e.next=9,M();case 9:a=e.sent;case 10:return e.abrupt("return",[].concat(P(n.map((function(e){return O(O({},r[e]),{},{type:"iframe",name:r[e].name,triggerWord:e,pluginId:r[e].pluginId})}))),P(a),P(o.map((function(e){return O(O({},e),{},{type:"webPage"})})))));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e){var t=e.filter((function(e){return"iframe"===e.type})).reduce((function(e,t){return e?O(O({},e),{},{[t.triggerWord]:t}):{[t.triggerWord]:t}}),"");R.set("iframeMap",t);var r=e.filter((function(e){return"inject"===e.type}));chrome.storage.local.set({insertTabsData:JSON.stringify(r)},(function(){}));var n=e.filter((function(e){return"webPage"===e.type}));R.set("webPagesMap",n)},C=function(){var e=D(regeneratorRuntime.mark((function e(t){var r,n,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:if(r=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:n=Array.isArray(t)?t:[t],o=[],i=regeneratorRuntime.mark((function e(t){var i,c,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n[t]){e.next=3;break}return e.abrupt("return","continue");case 3:return c=r.findIndex((function(e){return e.pluginId===i})),e.next=6,a.default.download(i);case 6:if(s=e.sent,u=s.code,l=s.data,200===u){e.next=11;break}return e.abrupt("return","continue");case 11:o.push(l),-1===c?r.push(l):r[c]=l;case 13:case"end":return e.stop()}}),e)})),c=0;case 9:if(!(c<n.length)){e.next=17;break}return e.delegateYield(i(c),"t0",11);case 11:if("continue"!==e.t0){e.next=14;break}return e.abrupt("continue",14);case 14:c++,e.next=9;break;case 17:return U(r),e.abrupt("return",o);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=D(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:r=e.sent,n=r.findIndex((function(e){return e.pluginId===t})),r.splice(n,1),U(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=D(regeneratorRuntime.mark((function e(t,r){var n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.request,n=r.sender,e.next=3,T(["webPage","iframe"]);case 3:if(o=e.sent,a=o.find((function(e){return e.pluginId===t}))){e.next=7;break}return e.abrupt("return",{code:0,data:"插件不存在"});case 7:if("webPage"!==a.type||a.openIsIframe||(i=chrome.runtime.getURL("pages/dynamicPlugin.html?pluginId=")+a.pluginId,chrome.tabs.create({url:i,active:!0},(function(){return{code:200,data:"成功"}}))),!("iframe"===a.type||"webPage"===a.type&&a.openIsIframe)){e.next=13;break}if(window.sendRequestHandlers.sendMessageToFrames){e.next=11;break}return e.abrupt("return",{code:0,data:"暂不支持在该页面唤起"});case 11:return window.sendRequestHandlers.sendMessageToFrames({message:{name:"runInTopFrame",registryEntry:{command:"Vomnibar.activate",optionList:[],options:{query:a.triggerWord},topFrame:!0},sourceFrameId:0}},n),e.abrupt("return",{code:200,data:"成功"});case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),L=function(){chrome.runtime.onMessageExternal.addListener((function(e,t,r){var n=e.type,o=e.data;return"plugin:list"===n&&T().then((function(e){r(e)})),"plugin:has"===n&&T().then((function(e){var t=e.find((function(e){return e.pluginId===o.pluginId}));r(t)})),"plugin:uninstall"===n&&E(o.pluginId).then((function(){r({code:200})})).catch((function(){r({code:0})})),"plugin:update"!==n&&"plugin:install"!==n||C(o.pluginId).then((function(e){r({code:e.length?200:0,data:e})})).catch((function(){r({code:0,data:[]})})),"plugin:active"===n&&q(o.pluginId,{request:e,sender:t}).then((function(e){r(e)})).catch((function(){r({code:0,data:"唤起失败"})})),!0}))},z=chrome.runtime.getManifest(),_=function(){chrome.runtime.onMessageExternal.addListener((function(e,t,r){var n=e.type,o=e.data;if("extension:openUrlPage"===n){var a=chrome.runtime.getURL("/");chrome.tabs.create({url:a+o.url,active:!0},(function(){r(!0)}))}return"extension:getVersion"===n&&z&&z.version&&r(z.version),!0}))};function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var Y=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:t=e.sent,r=["CSDNPlugin-93629669-1611657336315-06054541","CSDNPlugin-webPages_65171464-1614596442198-44274593","CSDNPlugin-webPages_97993279-1612252939492-67438709"].concat(F(["CSDNPlugin-97364131-1612340097776-39081057"])),n=regeneratorRuntime.mark((function e(n){var o,i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r[n]){e.next=3;break}return e.abrupt("return","continue");case 3:if(!((i=t.findIndex((function(e){return e.pluginId===o})))>-1)||t[i].enable){e.next=6;break}return e.abrupt("return","continue");case 6:return e.next=8,a.default.download(o);case 8:if(c=e.sent,s=c.code,u=c.data,200===s){e.next=13;break}return e.abrupt("return","continue");case 13:-1===i?t.push(u):t[i]=u;case 14:case"end":return e.stop()}}),e)})),o=0;case 6:if(!(o<r.length)){e.next=14;break}return e.delegateYield(n(o),"t0",8);case 8:if("continue"!==e.t0){e.next=11;break}return e.abrupt("continue",11);case 11:o++,e.next=6;break;case 14:U(t);case 15:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){J(a,n,o,i,c,"next",e)}function c(e){J(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),V={initExtensionListener(){setInterval(Y,864e5),chrome.runtime.onInstalled.addListener((function(e){var t=e.reason;Y(),"install"===t&&chrome.tabs.create({active:!0}),chrome.tabs.executeScript&&chrome.tabs.query&&chrome.tabs.query({status:"complete"},(function(e){var t,r=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=B(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(r.s();!(t=r.n()).done;){var n=t.value,o=/(^[^:\/#\?]*:\/\/([^#\?\/]*\.)?csdn\.net(:[0-9]{1,5})?\/.*$)/.test(n.url);o&&chrome.tabs.executeScript(n.id,{file:"js/plugin-activity.js",runAt:"document_end"},(function(){return chrome.runtime.lastError}))}}catch(e){r.e(e)}finally{r.f()}}))})),chrome.webRequest.onBeforeSendHeaders.addListener((function(e){var t=e.requestHeaders.find((function(e){return"referer"===e.name.toLowerCase()}));if(t){var r=t.value.indexOf("passport.csdn.net")>-1,n=t.value.indexOf("platform=plugin")>-1;if(r&&n)try{var o=t.value.indexOf("platform=plugin_pages")>-1,a="";if(o){var i=t.value.split("platform=plugin_")[1];i=i.replace(/~/g,"/").replace(/\$/g,"#/"),a=chrome.runtime.getURL(i)}chrome.storage.local.get(["tab-activity"],(function(e){if("2/2"!==e["tab-activity"].numStr){var t={};try{t="string"==typeof e["tab-activity"]?JSON.parse(e["tab-activity"]):e["tab-activity"]}catch(r){t=e["tab-activity"]}chrome.storage.local.set({"tab-activity":JSON.stringify(N(N({},t),{},{numStr:"1/2"}))})}}));var c=function(){return chrome.runtime.lastError};chrome.tabs.query({active:!0},(function(e){var t=e.length?e[0].id:"";chrome.tabs.executeScript(t,{code:"window.close();"},(function(){}))})),a?chrome.tabs.create({active:!0,url:a},c):chrome.tabs.create({active:!0},c)}catch(e){chrome.tabs.create({active:!0})}}}),{urls:["https://www.csdn.net/"]},["blocking","requestHeaders",chrome.webRequest.OnBeforeSendHeadersOptions.EXTRA_HEADERS].filter(Boolean)),chrome.webRequest.onBeforeSendHeaders.addListener((function(e){for(var t=e.requestHeaders,r="chrome-extension://"+chrome.runtime.id,n=t.length-1;n>=0;--n){var o=t[n];!("origin"===o.name.toLowerCase()||"referer"===o.name.toLowerCase())||o.value!==r&&"null"!==o.value||t.splice(n,1)}return{requestHeaders:t}}),{urls:["https://bizapi.csdn.net/searchplugin/api/v1/*","https://bizapi.csdn.net/plugin-marketing/api/v1/*"]},["blocking","requestHeaders",chrome.webRequest.OnBeforeSendHeadersOptions.EXTRA_HEADERS].filter(Boolean)),chrome.runtime.onMessage.addListener((function(e,t,r){var n=function(){return chrome.runtime.lastError};if("open_chrome_tab"===e.handler&&chrome.storage.local.get(["tab-activity"],(function(e){chrome.storage.local.set({"tab-activity":N(N({},e["tab-activity"]),{},{numStr:"1/2"})},(function(){chrome.tabs.create({active:!0},n)}))})),"open_plugin_activity"===e.handler){var o=chrome.runtime.getURL("pages/plugin-activity.html");chrome.tabs.create({url:o,active:!0},n)}if("open_plugin_settings"===e.handler){var a=chrome.runtime.getURL("pages/options.html");chrome.tabs.create({url:a,active:!0},n)}})),x(),chrome.runtime.onMessage.addListener((function(e,t,r){if("sendReportAjax"===e.handler){var n=e.message;n&&"report"===n.messageType?chrome.storage.local.get("installUUID",(function(t){Object.prototype.hasOwnProperty.call(n.data,"__logs__")?n.data.__logs__=n.data.__logs__.map((function(e){return Object.assign(e,{cid:t.installUUID})})):n=Object.assign(n,{data:b(b({},e.message.data),{},{cid:t.installUUID})}),e.message.type&&"post"===e.message.type.toLowerCase()&&(n.data=JSON.stringify(n.data)),$.ajax(n)})):n&&(e.message.type&&"post"===e.message.type.toLowerCase()&&(n.data=JSON.stringify(n.data)),$.ajax(n))}["reportPageView","reportClick","reportView"].includes(e.handler)&&csdn.report[e.handler](e.message)})),chrome.runtime.onMessage.addListener((function(e,t,r){"jsonPageFormat"===e.handler&&Settings.onLoaded((function(){for(var e={js:["vendor/codemirror/lib/codemirror.min.js","vendor/codemirror/addon/fold/foldcode.js","vendor/codemirror/addon/fold/foldgutter.js","vendor/codemirror/addon/fold/brace-fold.js","vendor/codemirror/addon/dialog/dialog.js","vendor/codemirror/addon/selection/active-line.js","vendor/codemirror/addon/scroll/annotatescrollbar.js","vendor/codemirror/mode/javascript/javascript.js","vendor/codemirror/addon/search/matchesonscrollbar.js","vendor/codemirror/addon/scroll/simplescrollbars.js","vendor/codemirror/addon/search/search.js","vendor/codemirror/addon/search/searchcursor.js","vendor/codemirror/addon/search/jump-to-line.js","js/jquery-3.5.1.min.js","js/jquery.tipTip.minified.js","js/jsonAutoFormat.js"],css:["css/tipTip.css","css/jsonAutoFormat.css","vendor/codemirror/lib/codemirror.css","vendor/codemirror/addon/fold/foldgutter.css","vendor/codemirror/addon/dialog/dialog.css","vendor/codemirror/addon/search/matchesonscrollbar.css","vendor/codemirror/addon/scroll/simplescrollbars.css","vendor/codemirror/theme/default.css"]},r=function(){return chrome.runtime.lastError},n=0,o=[[chrome.tabs.insertCSS,e.css],[chrome.tabs.executeScript,e.js]];n<o.length;n++){var a,i=m(o[n],2),c=i[0],s=f(i[1]);try{for(s.s();!(a=s.n()).done;){var u=a.value;c(t.tab.id,{file:u},r)}}catch(e){s.e(e)}finally{s.f()}}}))})),L(),_(),j()}},K=(r(517),r(495),r(408),r(371),r(602),r(171),r(127),r(114),".(".concat("aaa|aarp|abb|abbott|abogado|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|af|afl|ag|agency|ai|aig|airforce|airtel|al|alibaba|alipay|allfinanz|alsace|am|amica|amsterdam|an|analytics|android|ao|apartments|app|apple|aq|aquarelle|ar|aramco|archi|army|arpa|arte|as|asia|associates|at|attorney|au|auction|audi|audio|author|auto|autos|aw|ax|axa|az|azure|ba|baidu|band|bank|bar|barcelona|barclaycard|barclays|bargains|bauhaus|bayern|bb|bbc|bbva|bcn|bd|be|beats|beer|bentley|berlin|best|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|bl|black|blackfriday|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bom|bond|boo|book|boots|bosch|bostik|bot|boutique|bq|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|camera|camp|cancerresearch|canon|capetown|capital|car|caravan|cards|care|career|careers|cars|cartier|casa|cash|casino|cat|catering|cba|cbn|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chat|cheap|chloe|christmas|chrome|church|ci|cipriani|circle|cisco|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cool|coop|corsica|country|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|date|dating|datsun|day|dclk|de|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|diamonds|diet|digital|direct|directory|discount|dj|dk|dm|dnp|do|docs|dog|doha|domains|doosan|download|drive|dubai|durban|dvag|dz|earth|eat|ec|edeka|edu|education|ee|eg|eh|email|emerck|energy|engineer|engineering|enterprises|epson|equipment|er|erni|es|esq|estate|et|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|fage|fail|fairwinds|faith|family|fan|fans|farm|fashion|fast|feedback|ferrero|fi|film|final|finance|financial|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|florist|flowers|flsmidth|fly|fm|fo|foo|football|ford|forex|forsale|forum|foundation|fox|fr|fresenius|frl|frogans|frontier|fund|furniture|futbol|fyi|ga|gal|gallery|gallup|game|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glass|gle|global|globo|gm|gmail|gmo|gmx|gn|gold|goldpoint|golf|goo|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|group|gs|gt|gu|gucci|guge|guide|guitars|guru|gw|gy|hamburg|hangout|haus|hdfcbank|health|healthcare|help|helsinki|here|hermes|hiphop|hitachi|hiv|hk|hm|hn|hockey|holdings|holiday|homedepot|homes|honda|horse|host|hosting|hoteles|hotmail|house|how|hr|hsbc|ht|hu|hyundai|ibm|icbc|ice|icu|id|ie|ifm|iinet|il|im|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|international|investments|io|ipiranga|iq|ir|irish|is|iselect|ist|istanbul|it|itau|iwc|jaguar|java|jcb|je|jetzt|jewelry|jlc|jll|jm|jmp|jo|jobs|joburg|jot|joy|jp|jprs|juegos|kaufen|kddi|ke|kfh|kg|kh|ki|kia|kim|kinder|kitchen|kiwi|km|kn|koeln|komatsu|kp|kpn|kr|krd|kred|kw|ky|kyoto|kz|la|lacaixa|lamborghini|lamer|lancaster|land|landrover|lanxess|lasalle|lat|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|legal|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|limited|limo|lincoln|linde|link|live|living|lixil|lk|loan|loans|lol|london|lotte|lotto|love|lr|ls|lt|ltd|ltda|lu|lupin|luxe|luxury|lv|ly|ma|madrid|maif|maison|makeup|man|management|mango|market|marketing|markets|marriott|mba|mc|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|mf|mg|mh|miami|microsoft|mil|mini|mk|ml|mm|mma|mn|mo|mobi|mobily|moda|moe|moi|mom|monash|money|montblanc|mormon|mortgage|moscow|motorcycles|mov|movie|movistar|mp|mq|mr|ms|mt|mtn|mtpc|mtr|mu|museum|mutuelle|mv|mw|mx|my|mz|na|nadex|nagoya|name|natura|navy|nc|ne|nec|net|netbank|network|neustar|new|news|nexus|nf|ng|ngo|nhk|ni|nico|nikon|ninja|nissan|nl|no|nokia|norton|nowruz|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|office|okinawa|om|omega|one|ong|onl|online|ooo|oracle|orange|org|organic|origins|osaka|otsuka|ovh|pa|page|pamperedchef|panerai|paris|pars|partners|parts|party|pe|pet|pf|pg|ph|pharmacy|philips|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pohl|poker|porn|post|pr|praxi|press|pro|prod|productions|prof|promo|properties|property|protection|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|racing|re|read|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|ricoh|rio|rip|ro|rocher|rocks|rodeo|room|rs|rsvp|ru|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|saxo|sb|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scor|scot|sd|se|seat|security|seek|select|sener|services|seven|sew|sex|sexy|sfr|sg|sh|sharp|shell|shia|shiksha|shoes|show|shriram|si|singles|site|sj|sk|ski|skin|sky|skype|sl|sm|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|sony|soy|space|spiegel|spreadbetting|sr|srl|ss|st|stada|star|starhub|statefarm|statoil|stc|stcgroup|stockholm|storage|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|taobao|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|team|tech|technology|tel|telefonica|temasek|tennis|tf|tg|th|thd|theater|theatre|tickets|tienda|tiffany|tips|tires|tirol|tj|tk|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|tours|town|toyota|toys|tp|tr|trade|trading|training|travel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tushu|tv|tvs|tw|tz|ua|ubs|ug|uk|um|unicom|university|uno|uol|us|uy|uz|va|vacations|vana|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|villas|vin|vip|virgin|vision|vista|vistaprint|viva|vlaanderen|vn|vodka|volkswagen|vote|voting|voto|voyage|vu|wales|walter|wang|wanggou|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|wme|wolterskluwer|work|works|world|ws|wtc|wtf|xbox|xerox|xin","|").concat("在线|中文网|网址|网站|网络|公司|商城|机构|我爱你|商标|世界|集团|慈善|八卦|公益|佛山|广东|中国|台湾|台灣","|").concat("ac.cn|com.cn|edu.cn|gov.cn|mil.cn|net.cn|org.cn|ah.cn|bj.cn|cq.cn|fj.cn|gd.cn|gs.cn|gz.cn|gx.cn|ha.cn|hb.cn|he.cn|hi.cn|hl.cn|hn.cn|jl.cn|js.cn|jx.cn|ln.cn|nm.cn|nx.cn|qh.cn|sc.cn|sd.cn|sh.cn|sn.cn|sx.cn|tj.cn|xj.cn|xz.cn|yn.cn|zj.cn","|").concat("ac.jp|ad.jp|aichi.jp|akita.jp|aomori.jp|chiba.jp|co.jp|ed.jp|ehime.jp|fukui.jp|fukuoka.jp|fukushima.jp|gifu.jp|go.jp|gov.jp|gr.jp|gunma.jp|hiroshima.jp|hokkaido.jp|hyogo.jp|ibaraki.jp|ishikawa.jp|iwate.jp|kagawa.jp|kagoshima.jp|kanagawa.jp|kanazawa.jp|kawasaki.jp|kitakyushu.jp|kobe.jp|kochi.jp|kumamoto.jp|kyoto.jp|lg.jp|matsuyama.jp|mie.jp|miyagi.jp|miyazaki.jp|nagano.jp|nagasaki.jp|nagoya.jp|nara.jp|ne.jp|net.jp|niigata.jp|oita.jp|okayama.jp|okinawa.jp|or.jp|org.jp|osaka.jp|saga.jp|saitama.jp|sapporo.jp|sendai.jp|shiga.jp|shimane.jp|shizuoka.jp|takamatsu.jp|tochigi.jp|tokushima.jp|tokyo.jp|tottori.jp|toyama.jp|utsunomiya.jp|wakayama.jp|yamagata.jp|yamaguchi.jp|yamanashi.jp|yokohama.jp","|").concat("asn.au|conf.au|csiro.au|edu.au|gov.au|id.au|info.au|net.au|org.au|otc.au|oz.au|telememo.au",")|").concat("ac.uk|co.uk|edu.uk|gov.uk|ltd.uk|me.uk|mod.uk|net.uk|nhs.uk|nic.uk|org.uk|plc.uk|police.uk|sch.uk","|").concat("co.tv|co.th|co.nz|co.za","|").concat("com.ac|com.af|com.ag|com.ai|com.al|com.ar|com.au|com.aw|com.az|com.ba|com.bb|com.bh|com.bi|com.bm|com.bo|com.br|com.bs|com.bt|com.by|com.bz|com.ci|com.cm|com.cn|com.co|com.cu|com.cw|com.cy|com.dm|com.do|com.dz|com.ec|com.ee|com.eg|com.es|com.et|com.fr|com.ge|com.gh|com.gi|com.gl|com.gn|com.gp|com.gr|com.gt|com.gu|com.gy|com.hk|com.hn|com.hr|com.ht|com.im|com.io|com.iq|com.is|com.jo|com.kg|com.ki|com.km|com.kp|com.ky|com.kz|com.la|com.lb|com.lc|com.lk|com.lr|com.lv|com.ly|com.mg|com.mk|com.ml|com.mo|com.ms|com.mt|com.mu|com.mv|com.mw|com.mx|com.my|com.na|com.nf|com.ng|com.ni|com.nr|com.om|com.pa|com.pe|com.pf|com.ph|com.pk|com.pl|com.pr|com.ps|com.pt|com.py|com.qa|com.re|com.ro|com.rw|com.sa|com.sb|com.sc|com.sd|com.sg|com.sh|com.sl|com.sn|com.so|com.st|com.sv|com.sy|com.tj|com.tm|com.tn|com.to|com.tr|com.tt|com.tw|com.ua|com.ug|com.uy|com.uz|com.vc|com.ve|com.vi|com.vn|com.vu|com.ws|com.zm|com.de|com.se|com.ru",")").replace(/\./gi,"\\.")),G=function(e,t){void 0===t&&(t=[]);var r=new RegExp("(\\"+"/.+?|()[]{}\\".split("").concat(t).join("|\\")+")","g");return e.replace(r,"\\$1")},Z=function(e){return"*"===e?e="^(https?|http)://.*":(e.includes(".*/")&&(e=e.replace(".*/",".tdl/")),e=(e=(e=(e="^"+G(e)).replace(/\*/gi,".*")).replace(G(".tdl/"),K+"/")).replace(/(\^|:\/\/)\.\*/,"$1([^\\?#])*")),"("+e+")"},Q=function(e,t,r){var n=new XMLHttpRequest,o=function(){var t="",r=e.url;n.readyState>2&&(t=n.getAllResponseHeaders());var o={readyState:n.readyState,responseHeaders:t,requestUrl:r,status:4===n.readyState?n.status:0,statusText:4===n.readyState?n.statusText:""};return 4===n.readyState?n.responseType&&""!==n.responseType?(o.responseXML=null,o.responseText=null,o.response=n.response):(o.responseXML=n.responseXML?escape(n.responseXML):null,o.responseText=n.responseText,o.response=n.response):(o.responseXML=null,o.responseText="",o.response=null),o};n.onload=function(){var n=o();4!==n.readyState||200===n.status||0===n.status?t&&t(n):window.xmlhttpRequest(e,t,r)},n.onerror=function(){var a=o();4!==a.readyState||200===a.status||0===a.status?(r?r(a):t&&t(a),n=null):window.xmlhttpRequest(e,t,r)};try{if(n.open(e.method,e.url),e.headers)for(var a in e.headers)n.setRequestHeader(a,e.headers[a]);void 0!==e.responseType&&(n.responseType=e.responseType),void 0!==e.data?n.send(e.data):n.send()}catch(e){if(console.log("xmlhttpRequest Error: "+e.message),t){t({responseXML:"",responseText:"",response:null,readyState:4,responseHeaders:"",status:403,statusText:"Forbidden"})}}};window.requireCache={};var ee=window.requireCache,te=function e(){var t=Object.prototype.hasOwnProperty,r=+new Date-18e5,n=[];for(var o in ee)if(t.call(ee,o)){var a=ee[o];a&&a.timestamp&&a.timestamp<r&&n.push(o)}for(var i in n)t.call(n,i)&&delete ee[n[i]];window.setTimeout(e,3e5)};te();var re=function(e,t,r){ee[e]={timestamp:(new Date).getTime(),content:t,headers:r}},ne=function(e){var t=ee[e];return t&&(ee[e].timestamp=(new Date).getTime()),t},oe=r(61),ae=r(460);function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function fe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){pe(a,n,o,i,c,"next",e)}function c(e){pe(a,n,o,i,c,"throw",e)}i(void 0)}))}}var me=function(e){return new Promise((function(t){chrome.storage.local.get([e],(function(r){var n=null;try{n=(r[e]&&"string"==typeof r[e]?JSON.parse(r[e]):r[e])||[]}catch(t){n=r[e]}t(n)}))}))},de=function(){var e=fe(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,c,s,u,l,p,f,m,d,g,h,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me("insertTabsData");case 2:if(r="string"==typeof(r=e.sent)&&r?JSON.parse(r):r,n=[],o=[],a=[],i={},!(t.indexOf("__mode__=frame")>-1)){e.next=24;break}i=Settings.get("iframeMap"),c=BgUtils.getHostname(t),e.t0=regeneratorRuntime.keys(i);case 13:if((e.t1=e.t0()).done){e.next=24;break}if(s=e.t1.value,i[s]&&i[s].url){e.next=17;break}return e.abrupt("continue",13);case 17:i[s].type||(i[s].type="iframe"),u=BgUtils.getHostname(i[s].url),l=i[s].url.split("%s"),p=l.map((function(e){return BgUtils.getHostname(e)})).every((function(e){return t.indexOf(e)>-1||"www.".concat(t).indexOf(e)>-1})),u!==c&&"www.".concat(u)!==c||!p||i[s].css&&a.push(i[s]),e.next=13;break;case 24:f=0;case 25:if(!(f<r.length)){e.next=37;break}if(m=r[f],d=BgUtils.parseLines(m.content.match),g=d.map((function(e){return Z(e)})).some((function(e){return new RegExp(e).test(t)})),h=m.pluginId,b=m.enable,g&&n.push(h),g&&b){e.next=33;break}return e.abrupt("continue",34);case 33:a.push(m);case 34:f++,e.next=25;break;case 37:return e.abrupt("return",{data:a,cIds:n,framecIds:o});case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=fe(regeneratorRuntime.mark((function e(t,r){var n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me("tab-activity");case 2:(n=e.sent)&&n.regs&&(o=BgUtils.parseLines(n.regs),o.map((function(e){return Z(e)})).some((function(e){return new RegExp(e).test(t)}))&&(a=function(){return chrome.runtime.lastError},chrome.tabs.executeScript(r.id,{file:"js/plugin-activity.js",runAt:"document_end"},a)));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),he={insertCSS:(e,t)=>new Promise((function(r){chrome.tabs.insertCSS(e,{code:t,runAt:"document_start"},r)})),executeScript(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=Object(ae.b)();return";window.".concat(r," = function(){\n      try{ \n        with (this)\n        (() => {\n          ").concat(e,'\n        })()\n      } catch(e) {\n        console.error("CSDNPlugin: 插件').concat(t,'加载失败", e) \n      }\n    };window.').concat(r,".call({\n      CSDNPlugin: {\n        storage: chrome.storage\n      }\n    });")}(t,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).name);return new Promise((function(t){chrome.tabs.executeScript(e,ue(ue({code:"".concat(n)},r),{},{allFrames:r.allFrames||!1,runAt:r.runAt||"document_idle"}),t)}))},getXHRResource(e,t){var r=this;return new Promise((function(n,o){Q({method:"GET",url:t},(function(o){4===o.readyState&&200===o.status&&(re(o.requestUrl,o.responseText),t.endsWith(".css")?r.insertCSS(e,o.responseText).then((function(){n(o.responseText)})):n(o.responseText))}),o)}))}},be={inject:(e,t)=>fe(regeneratorRuntime.mark((function r(){var n,o,a,i,c,s,u,l,p,f,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.content,o=n.js,a=n.css,i=n.resources,c=n.runAt,s="",!i||!i.length){r.next=31;break}r.prev=4,u=0;case 6:if(!(u<i.length)){r.next=26;break}if(!(l=ne(i[u]))){r.next=18;break}if(!i[u].endsWith(".css")){r.next=14;break}return r.next=12,he.insertCSS(t.id,l.content);case 12:r.next=15;break;case 14:s+=l.content+(s.endsWith("\n")?"":"\n");case 15:i[u],r.next=23;break;case 18:return r.next=20,he.getXHRResource(t.id,i[u],{runAt:c},{name:e.name});case 20:p=r.sent,s+=p.content+(p.endsWith("\n")?"":"\n"),i[u];case 23:u++,r.next=6;break;case 26:r.next=31;break;case 28:r.prev=28,r.t0=r.catch(4),console.log("注入资源失败",r.t0);case 31:if(s+=o,r.prev=32,!a){r.next=37;break}return r.next=36,he.insertCSS(t.id,a);case 36:case 37:if(!s){r.next=41;break}return r.next=40,he.executeScript(t.id,s,{runAt:c},{name:e.name});case 40:case 41:r.next=46;break;case 43:r.prev=43,r.t1=r.catch(32),console.log("注入自定义的数据失败",r.t1);case 46:csdn&&csdn.report&&(f={type:"inject",name:e.name,pluginId:e.pluginId||""},m={spm:"1021.2146.3001.5698",extra:JSON.stringify(f)},csdn.report.reportView(m));case 47:case"end":return r.stop()}}),r,null,[[4,28],[32,43]])})))(),iframe:(e,t)=>fe(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.js,o=e.css,r.prev=2,!o){r.next=7;break}return r.next=6,he.insertCSS(t.id,o);case 6:case 7:if(!n){r.next=11;break}return r.next=10,he.executeScript(t.id,n,{},{name:e.name});case 10:case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(2),console.log("注入自定义的数据失败",r.t0);case 16:case"end":return r.stop()}}),r,null,[[2,13]])})))()};chrome.runtime.onMessage.addListener((function(e,t,r){if("background-bridge"===e.handler){var n=new Function("return ".concat(e.func))();"function"==typeof n&&n(e.params,r)}return!0})),chrome.runtime.onInstalled.addListener((function(e){if(e.reason.indexOf("update")>-1){for(var t=Settings.get("iframeMap"),r={},n=0,o=Object.entries(t);n<o.length;n++){var a=ie(o[n],2),i=a[0],c=a[1],s=Object.prototype.hasOwnProperty.call(c,"content");c.type&&"iframe"!==c.type||s||(c.createTime=dayjs().format("YYYY-MM-DD HH:mm:ss"),c.createUser=c.createUser||"",c.updateTime=dayjs().format("YYYY-MM-DD HH:mm:ss"),c.type="iframe",c.content={},c.pluginId||(c.pluginId=oe.a.getPluginId())),r[i]=c}Settings.set("iframeMap",r)}})),chrome.runtime.onMessage.addListener((function(e,t,r){var n=t.url,o=t.tab;if("GetScriptsCSDN"===e.handler){if(n&&!n.startsWith("http"))return;var a={cIds:[],framecIds:[]};return 0===t.frameId?(de(n).then(function(){var e=fe(regeneratorRuntime.mark((function e(t){var i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.data,c=t.cIds,s=t.framecIds,a={cIds:c,framecIds:s},"****** 执行注入任务: 插件数量: ".concat(i.length,", URL: ").concat(n,", 数据: JSON.stringify(data) *****"),(u=i.map((function(e){return be[e.type](e,o)}))).length&&Promise.all(u).then((function(e){})).catch((function(){})),r(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){r(a)})),ge(n,o),!0):void r(a)}})),o.initContextMenu(),V.initExtensionListener()},125:function(e,t,r){"use strict";r.r(t);r(37),r(223),r(26),r(22),r(167),r(28),r(39),r(60),r(72),r(266),r(42),r(17),r(24),r(32);var n=r(36),o=r(61),a=r(11);function i(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p="https://bizapi.csdn.net/searchplugin",f=a.j&&chrome.runtime&&chrome.runtime.getManifest?chrome.runtime.getManifest():{},m={uploadScreenShot(e){var t=new FormData;return t.append("file",e),n.a.post("".concat(p,"/api/v1/image/upload"),t,{headers:{"Content-Type":"multipart/form-data","X-Ca-Signed-Content-Type":"multipart/form-data"}})},upload:e=>n.a.post("".concat(p,"/api/v1/custom/plugin/add"),e,{headers:{"Content-Type":"application/json; charset=UTF-8"}}),downloadPlugin:e=>n.a.post("".concat(p,"/api/v1/custom/plugin/download"),e,{headers:{"Content-Type":"application/json; charset=UTF-8"}}),upadate:e=>n.a.post("".concat(p,"/api/v1/custom/plugin/list/new"),e,{headers:{"Content-Type":"application/json; charset=UTF-8"}}),list(e){var t=Object(n.b)(u({version:f.version||""},e));return n.a.get("".concat(p,"/api/v2/custom/plugin/list?").concat(t))},download:e=>new Promise((function(t){m.downloadPlugin({pluginId:e}).then((function(e){var r,n,a,i,c,s=e.code,l=e.data;if(200===s){var p,f,m,d,g,h={};if("iframe"!==l.type&&l.type||(l.type||(l.type="iframe"),(h=["name","height","url","triggerWord","canDelete","description","defaultEnable","placeholder","id","type","createUser","createTime","updateTime","pluginId"].reduce((function(e,t){return u(u({},e),{},{[t]:["canDelete","defaultEnable"].indexOf(t)>-1?1===l[t]:l[t]})}),{})).pluginId=h.pluginId||o.a.getPluginId()),"inject"!==l.type&&"webPage"!==l.type||(h=u(u({},l),{},{description:l.description||"",canDelete:1===l.canDelete,defaultEnable:1===l.defaultEnable})),h.enable=!0,h.content=JSON.parse(l.content),h.createTime=dayjs().format("YYYY-MM-DD HH:mm:ss"),null!==(r=h)&&void 0!==r&&null!==(n=r.content)&&void 0!==n&&n.screenShots)h.screenShots=null===(p=h)||void 0===p||null===(f=p.content)||void 0===f?void 0:f.screenShots,delete h.content.screenShots;else h.screenShots=[];if("iframe"!==l.type&&l.type||h.url||(h=u(u(u({},h),h.content),{},{content:{}})),null!==(a=h)&&void 0!==a&&null!==(i=a.content)&&void 0!==i&&i.logo||null!==(c=h)&&void 0!==c&&c.logo)h.logo=(null===(m=h)||void 0===m||null===(d=m.content)||void 0===d?void 0:d.logo)||(null===(g=h)||void 0===g?void 0:g.logo),delete h.content.logo;else h.logo="";if("webPage"===l.type){var b,v,y=Object.prototype.hasOwnProperty;h.url=chrome.runtime.getURL("pages/dynamicPlugin.html?pluginId=")+l.pluginId;var w=y.call(h.content,"openIsIframe");h.openIsIframe=!w||(null===(b=h)||void 0===b||null===(v=b.content)||void 0===v?void 0:v.openIsIframe),w&&delete h.content.openIsIframe}t({code:s,data:h})}else t({code:s,message:"下载失败"})})).catch((function(e){t({code:0,data:e})}))})),enable(e){var t=chrome.extension.getBackgroundPage().Settings,r=t.get("iframeMap")||[],n=Object.keys(r).map((function(e){return u(u({},r[e]),{},{pluginId:r[e].pluginId||o.a.getPluginId(),triggerWord:e})})),a=t.get("webPagesMap")||[],i=n.findIndex((function(t){return t.pluginId===e}));if(i>-1){n[i].enable=!0;var c=n.filter((function(e){return"iframe"===e.type||!e.type})).reduce((function(e,t){return e?u(u({},e),{},{[t.triggerWord]:t}):{[t.triggerWord]:t}}),"");return t.set("iframeMap",c),n[i]}var s=a.findIndex((function(t){return t.pluginId===e}));if(s>-1)return a[s].enable=!0,t.set("webPagesMap",a),a[s]},add(e){var t=chrome.extension.getBackgroundPage().Settings;if("webPage"===e.type){var r=t.get("webPagesMap")||[];t.set("webPagesMap",[].concat(i(r),[e]).sort((function(e,t){var r=e.createTime||"1970/01/01",n=t.createTime||"1970/01/01";return+new Date(n)-+new Date(r)})))}if("iframe"===e.type){var n=t.get("iframeMap")||[],a=Object.keys(n).map((function(e){return u(u({},n[e]),{},{pluginId:n[e].pluginId||o.a.getPluginId(),triggerWord:e})})),c=[].concat(i(a),[e]).sort((function(e,t){var r=e.createTime||"1970/01/01",n=t.createTime||"1970/01/01";return+new Date(n)-+new Date(r)})).filter((function(e){return"iframe"===e.type||!e.type})).reduce((function(e,t){return e?u(u({},e),{},{[t.triggerWord]:t}):{[t.triggerWord]:t}}),"");t.set("iframeMap",c)}}};t.default=m},159:function(e,t,r){"use strict";r(26),r(22),r(60),r(72),r(408),r(17),r(24),r(41),r(114),r(75);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,c,"next",e)}function c(e){s(a,n,o,i,c,"throw",e)}i(void 0)}))}}var l={prefix:"GM:base:",getKey(e){return"".concat(this.prefix).concat(e)},getValue(e){var t=this.getKey(e);return console.log("GetValue",t),browser.storage.local.get(t).then((function(e){return e[t]}))},setValue(e,t){return e?browser.storage.local.set({[this.getKey(e)]:t}):Promise.resolve()},getMulti(e,t,r){var n=this;return u(regeneratorRuntime.mark((function o(){var a;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,browser.storage.local.get(e.map(n.getKey,n));case 2:return a=o.sent,o.abrupt("return",e.reduce((function(e,o){var i=a[n.getKey(o)];return e[o]=r?r(o,i):i||t,e}),{}));case 4:case"end":return o.stop()}}),o)})))()},getAll(){var e=this;return u(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,browser.storage.local.get(null);case 2:return r=t.sent,n=Object.keys(r).filter((function(t){return t.startsWith(e.prefix)})).map((function(t){return t.replace(e.prefix,"")})),t.abrupt("return",n.reduce((function(t,n){return t[n]=r[e.getKey(n)],t}),{}));case 5:case"end":return t.stop()}}),t)})))()},remove(e){return e?browser.storage.local.remove(this.getKey(e)):Promise.resolve()},removeMulti(e){return e.length?browser.storage.local.remove(e.map(this.getKey,this)):Promise.resolve()},clear(){var e=this;return u(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,browser.storage.local.get(null);case 2:r=t.sent,n=Object.keys(r).filter((function(t){return t.startsWith(e.prefix)})).map((function(t){return t.replace(e.prefix,"")})),e.removeMulti(n);case 5:case"end":return t.stop()}}),t)})))()},dump(e){var t=this;return u(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.prefix?Object.entries(e).reduce((function(e,r){var n=i(r,2),o=n[0],a=n[1];return e[t.getKey(o)]=a,e}),{}):e,r.next=3,browser.storage.local.set(n);case 3:return r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})))()}};t.a={getAll(){var e=arguments;return u(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:"",t.next=3,browser.storage.local.get(null);case 3:return n=t.sent,t.abrupt("return",Object.keys(n).reduce((function(e,t){return n[t]&&t.startsWith(r)&&(e[t]=n[t]),e}),{}));case 5:case"end":return t.stop()}}),t)})))()},base:l,code:o(o({},l),{},{prefix:"GM:code:"}),require:o(o({},l),{},{prefix:"GM:require:"}),cache:o(o({},l),{},{prefix:"GM:cache:"}),mod:o(o({},l),{},{prefix:"GM:modify:"}),script:o(o({},l),{},{prefix:"GM:Script-",dump(e){var t=this;return u(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((e=(Array.isArray(e)?e:[e]).filter(Boolean)).length){r.next=3;break}return r.abrupt("return");case 3:return n=e.reduce((function(e,r){return e[t.getKey(r.props.id)]=r,e}),{}),r.next=6,l.dump(n);case 6:return r.abrupt("return",e);case 7:case"end":return r.stop()}}),r)})))()}}),value:o(o({},l),{},{prefix:"GM:value:"})}},36:function(e,t,r){"use strict";r.d(t,"b",(function(){return h}));r(17),r(24);var n=r(126),o=r.n(n),a=(r(26),r(374),r(39),r(97),r(266),r(90),r(127),r(41),r(51),r(114),r(280)),i=r.n(a),c=r(281),s=r.n(c);function u(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){var t={};for(var r in e){var n=r.toLowerCase();n.startsWith("x-ca-")&&("x-ca-signature"!==n&&"x-ca-signature-headers"!==n&&"x-ca-key"!==n&&"x-ca-nonce"!==n||(t[n]=e[r]))}return t},f=function(e){var t=e||null;return null==t&&(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))),t},m=function(e){var t=e.method,r=e.url,n=e.appSecret,o=e.accept,a=e.date,c=e.contentType,l=e.params,f=e.headers,m="";l||-1===r.indexOf("?")?l||(l={}):(l=function(e){var t={},r=e.match(/[?&]([^=&#]+)=([^&#]*)/g);if(r)for(var n in r){var o=r[n].split("="),a=o[0].substr(1),i=o[1];t[a]?t[a]=[].concat(t[a],i):t[a]=i}return t}(r),r=r.split("?")[0]);m+="".concat(t,"\n"),m+="".concat(o,"\n"),m+="".concat("","\n"),m+="".concat(c,"\n"),m+="".concat(a,"\n");var d,g=p(f),h=u(Array.from(Object.keys(g)).sort());try{for(h.s();!(d=h.n()).done;){var b=d.value;m+=b+":"+g[b]+"\n"}}catch(e){h.e(e)}finally{h.f()}return m+=function(e,t){var r,n=null,o=u(Array.from(Object.keys(t)).sort());try{for(o.s();!(r=o.n()).done;){var a=r.value,i=void 0;i=void 0!==t[a]&&""!==t[a]?a+"="+t[a]:a+t[a],n=n?n+"&"+i:i}}catch(e){o.e(e)}finally{o.f()}return n?e+"?"+n:e}(r.replace(/^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.csdn\.net)/,""),l),i()(m,n).toString(s.a)},d=o.a.create();!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.defaults.timeout=5e3,o.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",e.interceptors.request.use((function(e){return e.withCredentials=!0,t?g(e):e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return 400000701===e.data.code&&window.location.reload(!1),e.data}),(function(e){var t="";if(e.response){switch(e.response.status){case 401:case 405:window.location.href="https://passport.csdn.net/account/login?from="+encodeURIComponent(window.location.href)}if(e.response.data&&e.response.data.code&&e.response.data.message)return t=e.response.data&&e.response.data.code&&e.response.data.message,Promise.reject(e.response.data);t=e.response.statusText||e.response.data}else t="服务超时,请稍后重试";var r={code:0,message:t||"系统异常,请稍后再试"};return Promise.reject(r)}))}(d,!0);var g=function(e){var t=e.headers.common.Accept;null==t&&(t="*/*",e.headers.Accept=t);var r=e.headers.date;null==r&&(r="");var n=e.method,o=e.headers["Content-Type"]||e.headers[n]["Content-Type"];null==o&&(o="");var a=e.method,i=e.url,c=e.params;return a=a.toUpperCase(),e.headers["X-Ca-Key"]="203882242",e.headers["X-Ca-Nonce"]=f(),e.headers["X-Ca-Signature"]=m({method:a,url:i,accept:t,params:c,date:r,contentType:o,headers:e.headers,appSecret:"XIjXrVdXWo6mo5UTWWiF7Yuvqs0eVSBm"}),e.headers["X-Ca-Signature-Headers"]=function(e){var t,r,n=p(e),o=u(Array.from(Object.keys(n)).sort());try{for(o.s();!(r=o.n()).done;){var a=r.value;"x-ca-signature"!==a&&(t=t?t+","+a:a)}}catch(e){o.e(e)}finally{o.f()}return t}(e.headers),e};var h=function(e){var t="";for(var r in e)t+="&"+r+"="+e[r];return t.substr(1)};t.a=d},429:function(e,t){},460:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return l}));r(26),r(50),r(60),r(72),r(17),r(384),r(24),r(90),r(114),r(115),r(75);var n=r(159);function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){i(a,n,o,c,s,"next",e)}function s(e){i(a,n,o,c,s,"throw",e)}c(void 0)}))}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CSDNPlugin",t=performance.now.bind(performance),r=t();return e+Math.floor(1e12*(r-Math.floor(r))).toString(36)+Math.floor(1e12*Math.random()).toString(36)}function u(e,t,r){return t.reduce((function(t,n){var o=null==e?void 0:e[n];return r&&(o=r(o)),null!=o&&(t[n]=o),t}),{})}function l(e,t){return p.apply(this,arguments)}function p(){return(p=c(regeneratorRuntime.mark((function e(t,r){var a,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.meta,i=function(e,t){return n.a[t].fetch(e,r).catch((function(e){return e}))},e.next=4,Promise.all([].concat(o(a.require.map((function(e){return i(e,"require")}))),o(Object.values(a.resources).map((function(e){return i(e,"cache")})))));case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},61:function(e,t,r){"use strict";r(37),r(26),r(22),r(28),r(60),r(72),r(97),r(42),r(17),r(371),r(90),r(41),r(51),r(114),r(283),r(32);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=function(e){for(var t=[],r=["0","1","2","3","4","5","6","7","8","9"],n=0;n<e;n++){var o=Math.floor(10*Math.random());t[n]=r[o]}return t.join("")};t.a={parseLines:function(e){return e.replace(/\\\n/g,"").split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0}))},parseToTxt:function(e){return""},hasFullUrlPrefix:function(e){return new RegExp("^[a-z][-+.a-z0-9]{2,}://.").test(e)},hasJavascriptPrefix:function(e){return e.startsWith("javascript:")},urlParamsToObj:function(e){var t={};return e.replace(/([^?&=]+)=([^?&=]+)/g,(function(){t[arguments[1]]=arguments[2]})),t},objToUrlParams:function(e){var t="";return $.each(e,(function(r){t+="&"+r+"="+e[r]})),t.substr(1)},parseKeyValue:e=>"Array"!==Object.prototype.toString.call(e).slice(8,-1)?[]:e.reduce((function(e,t){var r=t.replace(/\s+/g,"").split(":"),n=r[0],a=r[1].split(",").reduce((function(e,t){return e?o(o({},e),{},{[t]:n}):{[t]:n}}),"");return e?o(o({},e),a):a}),""),getPluginId:e=>"CSDNPlugin-".concat(e?e+"_":"").concat(i(8),"-").concat(+new Date,"-").concat(i(8))}}});