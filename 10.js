(window.webpackJsonp=window.webpackJsonp||[]).push([[10,21],{1162:function(t,e,r){t.exports=r.p+"images/newTab/assets/img/color-checked.png"},1163:function(t,e,r){},1166:function(t,e,r){},1167:function(t,e,r){"use strict";r(1163)},1168:function(t,e,r){"use strict";r(26),r(39),r(97);function n(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o={data:()=>({colorList:["rgb(255, 255, 255)","rgb(61, 177, 166)","rgb(245, 166, 35)","rgb(18, 150, 219)","rgb(247, 135, 104)","rgb(179, 135, 246)","rgb(60, 69, 99)","rgb(34, 34, 38)"]}),computed:{isPresupposition(){return this.colorList.indexOf(this.value)>-1}},components:{VColorPopover:r(401).a},props:{value:{default:"rgb(255, 255, 255)",type:String},firstColor:{type:String,default:""}},methods:{colorSelect(t){this.$emit("on-select",t)}},mounted(){this.firstColor&&(this.colorList=[this.firstColor].concat(n(this.colorList.slice(1))))}},a=(r(1167),r(8)),s=Object(a.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"site_fontIcon"},[n("ul",{staticClass:"site_color_list"},[t._l(t.colorList,(function(e){return n("li",{key:e,class:["site_color",{site_color_check:t.value===e}],style:{"background-color":e},on:{click:function(r){return t.$emit("on-select",e)}}},[n("img",{attrs:{src:r(1162),alt:""}})])})),t._v(" "),n("li",{staticClass:"site_color"},[n("VColorPopover",{staticClass:"v-color-popover",attrs:{value:t.value,position:"bottom",customClass:"favicon-popover-color",withSuggestions:!1},on:{change:t.colorSelect}},[n("li",{class:["site_color","gradient_color",{site_color_check:!t.isPresupposition}]},[n("img",{attrs:{src:r(1162),alt:""}})])])],1)],2)])}),[],!1,null,null,null);e.a=s.exports},1169:function(t,e,r){"use strict";r(1166)},1170:function(t,e,r){t.exports=r.p+"images/newTab/assets/img/search-bookmark.png"},1171:function(t,e,r){"use strict";r(37),r(26),r(22),r(28),r(39),r(42),r(114),r(32);var n=r(1168),i=r(400),o=r(49),a=r(441);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var l={data:()=>({active:0,color:"rgb(204, 204, 204)",uploadImg:"",hostUrl:"".concat(i.a.faviconUrl,"?url=")}),props:{logo:{default:"",type:String},logoType:{default:"",type:String},name:{default:"",type:String},url:{default:"",type:String}},watch:{url:{handler(t){if(this.logo&&this.logo.startsWith("chrome://"))this.hostUrl=this.logo;else if(t){var e=document.createElement("a");e.href=t.indexOf("http")>-1?this.url:"https://".concat(this.url),this.hostUrl="".concat(i.a.faviconUrl,"?url=https://").concat(e.hostname)}else this.hostUrl="".concat(i.a.faviconUrl,"?url=https://")},immediate:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(o.c)({userInfo:"user/userInfo"})),components:{ColorBlock:n.a,IconUpload:a.a},methods:{imgUploadComplete(t){this.uploadImg=t},setActive(t){this.active=t},reset(){this.active=0,this.color="rgb(204, 204, 204)",this.uploadImg=""},selectColor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgb(204, 204, 204)";this.color=t},getResult(){var t=null;switch(this.active){case 0:t="web";break;case 1:t="text";break;case 2:t="image";break;default:t="image"}var e="web"===t||"text"===t;return{src:this.uploadImg||this.logo,html:e?this.$el.querySelector(".site_favicon li.active").children[0].outerHTML:"",logoType:t}}}},u=(r(1169),r(8)),p=Object(u.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("ul",{staticClass:"site_favicon"},[r("li",{class:["upload_site_icon icon-sprite",{active:0===t.active}],on:{click:function(e){t.active=0}}},[r("div",{staticClass:"fontLink",style:{background:t.color}},[r("span",[t.url?r("img",{attrs:{src:t.hostUrl}}):t._e()])])]),t._v(" "),r("li",{class:["font_text",{active:1===t.active}],on:{click:function(e){t.active=1}}},[r("div",{staticClass:"font_box",style:{"font-size":"30px",background:t.color}},[r("font",{staticClass:"text",staticStyle:{height:"30px"}},[t._v(t._s(t.name.toUpperCase().slice(0,2)))])],1)]),t._v(" "),r("li",{class:[{active:2===t.active}]},[r("IconUpload",{attrs:{logo:t.logo},on:{choose:function(e){t.active=2},upload:t.imgUploadComplete}})],1)]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],staticClass:"favicon-url"},[r("p",[t._v("图标URL：")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.hostUrl,expression:"hostUrl"}],attrs:{type:"text"},domProps:{value:t.hostUrl},on:{input:function(e){e.target.composing||(t.hostUrl=e.target.value)}}})]),t._v(" "),r("ColorBlock",{directives:[{name:"show",rawName:"v-show",value:2!==t.active,expression:"active !== 2"}],attrs:{"first-color":"rgb(204, 204, 204)"},on:{"on-select":t.selectColor},model:{value:this.color,callback:function(e){t.$set(this,"color",e)},expression:"this.color"}})],1)}),[],!1,null,null,null);e.a=p.exports},1178:function(t,e,r){t.exports=r.p+"images/newTab/assets/img/add-icon.png"},1179:function(t,e,r){},1199:function(t,e,r){"use strict";r(1179)},1241:function(t,e,r){"use strict";r.r(e);r(37),r(26),r(22),r(28),r(169),r(39),r(60),r(170),r(42),r(171),r(127),r(32),r(75);var n=r(53),i=r.n(n),o=r(166),a=r.n(o),s=r(1171),c=r(1161),l=r(25),u=r(36),p=r(11),d="https://bizapi.csdn.net/searchplugin",g={getCategorys:function(){return u.a.get("".concat(d,"/api/v1/icon/category/list?pageSize=1000"))},getIcons:function(t){return u.a.get("".concat(d,"/api/v1/icon/list?").concat(Object(p.f)(t)))}},f=r(123),m=r(49),h=r(160),v=r(125),b=r(615),y=r.n(b);function w(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function O(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){x(o,n,i,a,s,"next",t)}function s(t){x(o,n,i,a,s,"throw",t)}a(void 0)}))}}function I(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?I(Object(r),!0).forEach((function(e){P(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function P(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var C={data:()=>({customSite:"",customSiteName:"",currentType:"",currentList:[],searchSite:"",searchList:[],categorys:[],categorysLocal:f.f.categorys,bscroll:null,currentListIndex:1,currentAllList:[],isAddShow:!1,scrollViewHeight:"",extensionsPlugin:{loading:!1,pageSize:30,total:1}}),components:{Favicon:s.a},computed:_(_({categorysFull(){var t=this.categorys.map((function(t){return _(_({},t),{},{categoryType:"remote"})}));return this.categorysLocal.forEach((function(e){e.categoryType="local",void 0!==e.orderIndex?t.splice(e.orderIndex,0,e):t.push(e)})),t}},Object(m.c)({activityInfo:"activity/activityInfo",tabIcons:"config/tab-icons",tabSettings:"config/tab-settings",userInfo:"user/userInfo"})),{},{showActivity(){var t,e;return this.activityInfo.marketSwitch&&(null===(t=this.activityInfo)||void 0===t||null===(e=t.side)||void 0===e?void 0:e.showSwitch)}}),mounted(){window.addEventListener("scroll",this.handleScrollView),this.getScrollViewHeight()},props:{display:{default:!1,type:Boolean}},watch:{isAddShow(){var t=this;this.$nextTick((function(){t.getScrollViewHeight()}))},display:{handler(t){t?f.f.categorys.map((function(t){return t.id})).includes(this.currentType)?this.getPluginIcons(this.currentType):this.getList(this.currentType):this.$refs.favRefAdd&&this.$refs.favRefAdd.reset()},immediate:!0},searchSite(t){t?this.searchIcon():(this.searchList=[],this.initScroll())}},methods:{enableEdit:t=>!(t.url&&0===t.url.indexOf("LocalInstall://")),popoverPreview(t){h.d.call(this,t)},popoverEdit(t){var e=this.hasIcon(t);e&&this.$emit("on-edit",e)},popoverDelete(t){Object(h.b)(t)},getScrollViewHeight(){var t=this,e=document.querySelector(".module-add-top");e&&(this.scrollViewHeight="calc(100vh - ".concat(e.offsetHeight+91,"px)"),this.$nextTick((function(){t.bscroll&&t.bscroll.refresh()})))},openActivity(){this.$OpenActivityPage()},handleScrollView(){var t=document.querySelector(".scroll-view"),e=document.querySelector(".right-icons"),r=t.offsetHeight,n=t.style.transform,i=n.match(/translateY\(-(\d+)px\)/),o=0;n&&i&&(o=+i[1]),o+e.offsetHeight>=r&&"plugin-extensions"===this.currentType&&this.getNextData()},getNextData:a()(O(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("plugin-extensions"!==this.currentType){t.next=10;break}if(!this.extensionsPlugin.loading&&this.currentList.length!==this.extensionsPlugin.total){t.next=3;break}return t.abrupt("return");case 3:return this.extensionsPlugin.loading=!0,this.currentListIndex+=1,t.next=7,this.getExtensions();case 7:e=t.sent,this.currentList=[].concat(w(this.currentList),w(e)),setTimeout((function(){r.extensionsPlugin.loading=!1,r.bscroll.refresh()}));case 10:case"end":return t.stop()}}),t,this)}))),600),addCustomIcon(){var t=this.$refs.favRefAdd.getResult(),e=t.src,r=t.html,n=t.logoType;if(this.customSite&&this.customSiteName)if("image"!==n||e){var i=this.customSite;-1===i.indexOf("://")&&0!==i.indexOf("http")&&0!==i.indexOf("CSDN://")&&(i="http://"+i);var o={id:+new Date+"",logoType:n,name:this.customSiteName,url:i,src:e,html:r};this.iconsAdd(o),this.isAddShow=!1}else this.$message.warn("请先上传图片");else this.$message.warn("请填写完整")},iconsAdd:a()((function(t){var e=this;if(this.hasIcon(t))this.$message.info("快捷方式已存在");else{var r=i()(this.tabIcons),n=Object(h.a)(r,_(_({},t),{},{id:t.id+""||+new Date+""})),o=n.data,a=n.page;l.a.set("tab-icons",o),this.$message.success("添加成功"),this.customSite="",this.customSiteName="",Object(p.l)({spm:this.SPM.addIcons,dest:t.url,extra:JSON.stringify({name:t.name})}),1===r.length&&1===r[0].length||this.$emit("on-add",a+1),this.$store.commit("icons/setLockSlide",!1),setTimeout((function(){e.$store.commit("icons/setLockSlide",!0)}),200)}}),100,{leading:!0,trailing:!1}),initScroll(){var t=this;this.$nextTick((function(){t.bscroll?(t.bscroll.refresh(),t.bscroll.scrollTo(0,0),t.searchBackShow=!1):(t.bscroll=new c.a(".right-icons",{scrollY:!0,click:!0,scrollbar:{fade:!0,interactive:!0},bounce:!1,mouseWheel:!0}),t.bscroll.on("scrollStart",(function(){t.getScrollViewHeight()})),t.bscroll.on("mousewheelStart",(function(){t.getScrollViewHeight()})),t.searchBackShow=!1)}))},getPluginIcons(t){var e=this;return O(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.currentListIndex=1,e.currentType=t,e.searchSite="","plugin-system-bookmark"!==t){r.next=6;break}return e.$emit("open-bookmark"),r.abrupt("return");case 6:if("plugin-extensions"!==t){r.next=13;break}return e.currentType="plugin-extensions",r.next=10,e.getExtensions();case 10:e.currentList=r.sent,r.next=14;break;case 13:"plugin-system-topSite"===t?Object(f.c)().then((function(t){e.currentList=t})):e.currentList=f.f.icons[t];case 14:e.initScroll();case 15:case"end":return r.stop()}}),r)})))()},getList(t){var e=this;return O(regeneratorRuntime.mark((function r(){var n,i,o,a,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t,e.currentList=[],e.searchSite="",e.categorys&&e.categorys.length){r.next=10;break}return r.next=6,g.getCategorys();case 6:i=r.sent,o=i.data.list,e.categorys=o||[],o.length&&(n=o[0].id||t);case 10:return r.next=12,g.getIcons({categoryId:n});case 12:a=r.sent,s=a.data.list,e.currentType=n,e.currentList=s.map((function(t){var e=t.iconName,r=t.iconSrc,n=t.iconUrl,i=t.iconId;return{logoType:t.iconType||"image",id:i,iconId:i,name:e,src:r,url:n}}))||[],e.currentListIndex=1,e.initScroll();case 18:case"end":return r.stop()}}),r)})))()},getExtensions(){var t=this;return O(regeneratorRuntime.mark((function e(){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.list({pageNum:t.currentListIndex,pageSize:t.extensionsPlugin.pageSize,userName:t.userInfo.UserName||"",multiType:"iframe,webPage"});case 2:if(r=e.sent,n=r.code,i=r.data,200!==n){e.next=10;break}return t.extensionsPlugin.total=i.total,e.abrupt("return",i.list.filter((function(t){return"inject"!==t.type})).map((function(t){var e=_(_({},t),JSON.parse(t.content));return{id:e.pluginId,name:e.name,logoType:"install",url:"Install://".concat(e.type,"/").concat(e.pluginId),pluginId:e.pluginId,src:e.logo||y.a}})));case 10:return t.$message.error("获取应用商店数据失败"),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e)})))()},searchIcon:a()(O(regeneratorRuntime.mark((function t(){var e,r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.getIcons({name:this.searchSite});case 2:e=t.sent,r=e.data.list,this.searchList=r.map((function(t){var e=t.iconName,r=t.iconSrc,n=t.iconUrl,i=t.iconId;return{logoType:t.iconType||"image",id:i,name:e,src:r,url:n}}))||[],this.currentListIndex=1,this.initScroll(),v.default.list({pageNum:1,pageSize:30,name:this.searchSite,userName:this.userInfo.UserName||"",multiType:"iframe,webPage"}).then((function(t){var e=t.code,r=t.data;if(200!==e)return[];var i=["CSDNPlugin-webPages_97993279-1612252939492-67438709","CSDNPlugin-93629669-1611657336315-06054541","CSDNPlugin-webPages_65171464-1614596442198-44274593"].concat(w(f.g.map((function(t){return t.pluginId})).filter((function(t){return t})))),o=r.list.filter((function(t){return"inject"!==t.type&&!i.includes(t.pluginId)})).map((function(t){var e=_(_({},t),JSON.parse(t.content));return{id:e.pluginId,name:e.name,logoType:"install",url:"Install://".concat(e.type,"/").concat(e.pluginId),pluginId:e.pluginId,src:e.logo||y.a}}));n.searchList=[].concat(w(n.searchList),w(o))})),this.searchList=[].concat(w(this.searchList),w(f.f.icons["plugin-system"].filter((function(t){return t.name.includes(n.searchSite)}))));case 9:case"end":return t.stop()}}),t,this)}))),800),hasIcon(t){return Object(h.c)(t,this.tabIcons)}}},j=(r(1199),r(8)),k=Object(j.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"module-add"}},[n("div",{staticClass:"module-add-top"},[t.isAddShow?n("div",{staticClass:"custom-add"},[n("div",{staticClass:"custom-form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.customSite,expression:"customSite"}],attrs:{type:"text",placeholder:"输入网址"},domProps:{value:t.customSite},on:{input:function(e){e.target.composing||(t.customSite=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.customSiteName,expression:"customSiteName"}],attrs:{type:"text",placeholder:"输入名称"},domProps:{value:t.customSiteName},on:{input:function(e){e.target.composing||(t.customSiteName=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"custom-favicon"},[n("Favicon",{ref:"favRefAdd",attrs:{name:t.customSiteName,url:t.customSite}})],1),t._v(" "),n("button",{staticClass:"add",on:{click:function(e){return e.stopPropagation(),t.addCustomIcon(e)}}},[t._v("添加")]),t._v(" "),n("button",{on:{click:function(e){e.stopPropagation(),t.isAddShow=!1}}},[t._v("取消")])]):t._e(),t._v(" "),t.isAddShow?t._e():n("div",{staticClass:"customAdd-and-search"},[n("div",{staticClass:"search-view"},[n("img",{attrs:{src:r(1170),alt:""}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchSite,expression:"searchSite",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"搜索名称"},domProps:{value:t.searchSite},on:{input:function(e){e.target.composing||(t.searchSite=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.searchSite,expression:"searchSite"}],staticClass:"delete",on:{click:function(e){t.searchSite=""}}})]),t._v(" "),n("div",{staticClass:"custom-add-btn",on:{click:function(e){t.isAddShow=!0}}},[n("span",[t._v("自定义")])])]),t._v(" "),t.showActivity?n("div",{staticClass:"activity",on:{click:t.openActivity}},[t._v(t._s(t.activityInfo.side.title)+" 立即参与 >")]):t._e()]),t._v(" "),n("div",{staticClass:"scroll-wrap",style:{height:t.scrollViewHeight}},[n("div",{staticClass:"left-categrey"},[n("ul",t._l(t.categorysFull,(function(e){return n("li",{key:""+e.id,class:{active:e.id===t.currentType&&!t.searchSite},on:{click:function(r){"remote"===e.categoryType?t.getList(e.id):t.getPluginIcons(e.id)}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:e.id===t.currentType&&!t.searchSite,expression:"cate.id === currentType && !searchSite"}],attrs:{src:e.actionImage,alt:""}}),t._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:e.id!==t.currentType||t.searchSite,expression:"cate.id !== currentType || searchSite"}],attrs:{src:e.defaultImage,alt:""}}),t._v(" "),n("span",[t._v(t._s(e.categoryName))])])})),0)]),t._v(" "),n("div",{staticClass:"right-icons"},[n("div",{staticClass:"scroll-view",on:{mousewheel:t.handleScrollView}},[n("div",{staticClass:"main-scroll"},t._l(t.searchSite?t.searchList:t.currentList,(function(e,i){return n("a-popover",{key:e.id+"-"+i,attrs:{overlayClassName:"add-icon-popover",mouseEnterDelay:.3,title:"",placement:"topLeft",trigger:"hover"}},[n("template",{slot:"content"},[n("BlurGrass",{attrs:{firefox:""}}),t._v(" "),n("div",{staticClass:"popover-icon-item"},[n("p",[t._v(t._s(e.name))]),t._v(" "),n("div",{style:{width:i%3==2?"136px":"auto","font-size":"0"}},[t.enableEdit(e)?n("span",{on:{click:function(r){return t.popoverPreview(e)}}},[t._v("访问")]):t._e(),t._v(" "),t.hasIcon(e)?[t.enableEdit(e)&&!e.url.startsWith("CSDN://")?n("span",{on:{click:function(r){return t.popoverEdit(e)}}},[t._v("编辑")]):t._e(),t._v(" "),n("span",{on:{click:function(r){return t.popoverDelete(e)}}},[t._v("移除")])]:n("span",{on:{click:function(r){return r.stopPropagation(),t.iconsAdd(e)}}},[t._v("添加")])],2)])],1),t._v(" "),"web"===e.logoType?n("div",{staticClass:"icon-item-view",on:{click:function(r){return r.stopPropagation(),t.iconsAdd(e)}}},[n("div",{domProps:{innerHTML:t._s(e.html)}}),t._v(" "),n("p",[t._v(t._s(e.name))]),t._v(" "),t.hasIcon(e)?n("img",{staticClass:"has-icon",attrs:{src:r(578),alt:""}}):n("img",{staticClass:"add-icon",attrs:{src:r(1178),alt:""}})]):n("div",{staticClass:"icon-item-view",on:{click:function(r){return r.stopPropagation(),t.iconsAdd(e)}}},[n("img",{staticClass:"logo-image",attrs:{src:e.src,alt:""}}),t._v(" "),n("p",[t._v(t._s(e.name))]),t._v(" "),t.hasIcon(e)?n("img",{staticClass:"has-icon",attrs:{src:r(578),alt:""}}):n("img",{staticClass:"add-icon",attrs:{src:r(1178),alt:""}})])],2)})),1)])])])])}),[],!1,null,null,null);e.default=k.exports},125:function(t,e,r){"use strict";r.r(e);r(37),r(223),r(26),r(22),r(167),r(28),r(39),r(60),r(72),r(266),r(42),r(17),r(24),r(32);var n=r(36),i=r(61),o=r(11);function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p="https://bizapi.csdn.net/searchplugin",d=o.j&&chrome.runtime&&chrome.runtime.getManifest?chrome.runtime.getManifest():{},g={uploadScreenShot(t){var e=new FormData;return e.append("file",t),n.a.post("".concat(p,"/api/v1/image/upload"),e,{headers:{"Content-Type":"multipart/form-data","X-Ca-Signed-Content-Type":"multipart/form-data"}})},upload:t=>n.a.post("".concat(p,"/api/v1/custom/plugin/add"),t,{headers:{"Content-Type":"application/json; charset=UTF-8"}}),downloadPlugin:t=>n.a.post("".concat(p,"/api/v1/custom/plugin/download"),t,{headers:{"Content-Type":"application/json; charset=UTF-8"}}),upadate:t=>n.a.post("".concat(p,"/api/v1/custom/plugin/list/new"),t,{headers:{"Content-Type":"application/json; charset=UTF-8"}}),list(t){var e=Object(n.b)(l({version:d.version||""},t));return n.a.get("".concat(p,"/api/v2/custom/plugin/list?").concat(e))},download:t=>new Promise((function(e){g.downloadPlugin({pluginId:t}).then((function(t){var r,n,o,a,s,c=t.code,u=t.data;if(200===c){var p,d,g,f,m,h={};if("iframe"!==u.type&&u.type||(u.type||(u.type="iframe"),(h=["name","height","url","triggerWord","canDelete","description","defaultEnable","placeholder","id","type","createUser","createTime","updateTime","pluginId"].reduce((function(t,e){return l(l({},t),{},{[e]:["canDelete","defaultEnable"].indexOf(e)>-1?1===u[e]:u[e]})}),{})).pluginId=h.pluginId||i.a.getPluginId()),"inject"!==u.type&&"webPage"!==u.type||(h=l(l({},u),{},{description:u.description||"",canDelete:1===u.canDelete,defaultEnable:1===u.defaultEnable})),h.enable=!0,h.content=JSON.parse(u.content),h.createTime=dayjs().format("YYYY-MM-DD HH:mm:ss"),null!==(r=h)&&void 0!==r&&null!==(n=r.content)&&void 0!==n&&n.screenShots)h.screenShots=null===(p=h)||void 0===p||null===(d=p.content)||void 0===d?void 0:d.screenShots,delete h.content.screenShots;else h.screenShots=[];if("iframe"!==u.type&&u.type||h.url||(h=l(l(l({},h),h.content),{},{content:{}})),null!==(o=h)&&void 0!==o&&null!==(a=o.content)&&void 0!==a&&a.logo||null!==(s=h)&&void 0!==s&&s.logo)h.logo=(null===(g=h)||void 0===g||null===(f=g.content)||void 0===f?void 0:f.logo)||(null===(m=h)||void 0===m?void 0:m.logo),delete h.content.logo;else h.logo="";if("webPage"===u.type){var v,b,y=Object.prototype.hasOwnProperty;h.url=chrome.runtime.getURL("pages/dynamicPlugin.html?pluginId=")+u.pluginId;var w=y.call(h.content,"openIsIframe");h.openIsIframe=!w||(null===(v=h)||void 0===v||null===(b=v.content)||void 0===b?void 0:b.openIsIframe),w&&delete h.content.openIsIframe}e({code:c,data:h})}else e({code:c,message:"下载失败"})})).catch((function(t){e({code:0,data:t})}))})),enable(t){var e=chrome.extension.getBackgroundPage().Settings,r=e.get("iframeMap")||[],n=Object.keys(r).map((function(t){return l(l({},r[t]),{},{pluginId:r[t].pluginId||i.a.getPluginId(),triggerWord:t})})),o=e.get("webPagesMap")||[],a=n.findIndex((function(e){return e.pluginId===t}));if(a>-1){n[a].enable=!0;var s=n.filter((function(t){return"iframe"===t.type||!t.type})).reduce((function(t,e){return t?l(l({},t),{},{[e.triggerWord]:e}):{[e.triggerWord]:e}}),"");return e.set("iframeMap",s),n[a]}var c=o.findIndex((function(e){return e.pluginId===t}));if(c>-1)return o[c].enable=!0,e.set("webPagesMap",o),o[c]},add(t){var e=chrome.extension.getBackgroundPage().Settings;if("webPage"===t.type){var r=e.get("webPagesMap")||[];e.set("webPagesMap",[].concat(a(r),[t]).sort((function(t,e){var r=t.createTime||"1970/01/01",n=e.createTime||"1970/01/01";return+new Date(n)-+new Date(r)})))}if("iframe"===t.type){var n=e.get("iframeMap")||[],o=Object.keys(n).map((function(t){return l(l({},n[t]),{},{pluginId:n[t].pluginId||i.a.getPluginId(),triggerWord:t})})),s=[].concat(a(o),[t]).sort((function(t,e){var r=t.createTime||"1970/01/01",n=e.createTime||"1970/01/01";return+new Date(n)-+new Date(r)})).filter((function(t){return"iframe"===t.type||!t.type})).reduce((function(t,e){return t?l(l({},t),{},{[e.triggerWord]:e}):{[e.triggerWord]:e}}),"");e.set("iframeMap",s)}}};e.default=g},441:function(t,e,r){"use strict";r(50),r(17),r(24),r(115),r(222);var n=r(577),i=r(400),o=r(11),a=r(615),s=r.n(a),c={data:()=>({updateVisible:!1,previews:{},previewStyle:{},option:{type:"blob",img:"",outputSize:1,outputType:"png",autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!1,centerBox:!1,high:!0,canMoveBox:!0,mode:"cover"}}),components:{VueCropper:n.VueCropper},props:{logo:{type:String,default:""}},computed:{logoUrl(){return this.logo||s.a}},methods:{downloadImg(t){this.getCropResult("blob").then((function(t){var e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download",+new Date+""),e.click()}))},realTime(t){var e=t;this.previewStyle={width:e.w+"px",height:e.h+"px",overflow:"hidden",margin:"0",zoom:65/e.w},this.previews=t},rotateLeft(){this.$refs.cropper.rotateLeft()},rotateRight(){this.$refs.cropper.rotateRight()},changeScale(t){t=t||1,this.$refs.cropper.changeScale(t)},refreshCrop(){this.$refs.cropper.refresh()},chooseImage(){var t=this;this.$emit("choose"),Object(o.c)("",{maxSize:1048576,type:"blob"===this.option.type?"readAsArrayBuffer":"readAsDataURL"}).then((function(e){200===e.code?(t.option.img=e.data,t.updateVisible=!0,t.$nextTick((function(){t.refreshCrop()}))):t.$message.info(e.message)}))},getCropResult(t){var e=this;return new Promise((function(r){"blob"===t?e.$refs.cropper.getCropBlob((function(t){var e=window.URL.createObjectURL(t);r(e)})):e.$refs.cropper.getCropData((function(t){r(t)}))}))},handleOkUploadImg(){var t=this,e="upload";this.getCropResult().then((function(r){t.$message.loading({content:"上传中...",key:e}),i.a.uploadIcon(r).then((function(r){200===r.code?(setTimeout((function(){t.$message.success({content:"上传成功!",key:e})}),400),t.updateVisible=!1,t.$emit("upload",r.data.url)):t.$message.error({content:"上传失败!",key:e})})).catch((function(){t.$message.error("上传失败")}))}))}}},l=(r(746),r(8)),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-img-icon"},[n("div",{staticClass:"img_box",on:{click:t.chooseImage}},[t.logoUrl&&!t.option.img?n("img",{attrs:{src:t.logoUrl,alt:""}}):t._e(),t._v(" "),t.option.img?n("div",{style:t.previewStyle},[n("div",{style:t.previews.div},[n("img",{style:t.previews.img,attrs:{src:t.previews.url}})])]):t._e(),t._v(" "),t.logoUrl||t.option.img?t._e():n("img",{attrs:{src:r(740),alt:""}})]),t._v(" "),n("a-modal",{staticClass:"upload-img",attrs:{closable:!1,dialogClass:"upload-img-wrap",width:360,maskClosable:!0,cancelText:"取消",okText:"确定"},on:{ok:t.handleOkUploadImg},model:{value:t.updateVisible,callback:function(e){t.updateVisible=e},expression:"updateVisible"}},[n("div",{staticClass:"c-cropper-wrapper"},[n("vueCropper",{ref:"cropper",attrs:{img:t.option.img,outputSize:t.option.outputSize,outputType:t.option.outputType,autoCrop:t.option.autoCrop,autoCropWidth:t.option.autoCropWidth,autoCropHeight:t.option.autoCropHeight,fixedBox:t.option.fixedBox,fixed:!0,centerBox:t.option.centerBox,canMoveBox:t.option.canMoveBox,high:t.option.high,mode:t.option.mode},on:{realTime:t.realTime}})],1),t._v(" "),n("div",{staticClass:"cropper-icons"},[n("div",{staticClass:"cropper-icon-group"},[n("div",{on:{click:function(e){return t.rotateLeft()}}},[n("img",{attrs:{src:r(741),alt:""}})]),t._v(" "),n("div",{on:{click:function(e){return t.rotateRight()}}},[n("img",{attrs:{src:r(742),alt:""}})])]),t._v(" "),n("div",{staticClass:"cropper-icon-group"},[n("div",{on:{click:function(e){return t.changeScale(1)}}},[n("img",{attrs:{src:r(743),alt:""}})]),t._v(" "),n("div",{on:{click:function(e){return t.changeScale(-1)}}},[n("img",{attrs:{src:r(744),alt:""}})])]),t._v(" "),n("div",{staticClass:"cropper-icon-group"},[n("div",{attrs:{shape:"round"},on:{click:function(e){return t.refreshCrop()}}},[n("img",{attrs:{src:r(745),alt:""}})])])])])],1)}),[],!1,null,null,null);e.a=u.exports},61:function(t,e,r){"use strict";r(37),r(26),r(22),r(28),r(60),r(72),r(97),r(42),r(17),r(371),r(90),r(41),r(51),r(114),r(283),r(32);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=function(t){for(var e=[],r=["0","1","2","3","4","5","6","7","8","9"],n=0;n<t;n++){var i=Math.floor(10*Math.random());e[n]=r[i]}return e.join("")};e.a={parseLines:function(t){return t.replace(/\\\n/g,"").split("\n").map((function(t){return t.trim()})).filter((function(t){return t.length>0}))},parseToTxt:function(t){return""},hasFullUrlPrefix:function(t){return new RegExp("^[a-z][-+.a-z0-9]{2,}://.").test(t)},hasJavascriptPrefix:function(t){return t.startsWith("javascript:")},urlParamsToObj:function(t){var e={};return t.replace(/([^?&=]+)=([^?&=]+)/g,(function(){e[arguments[1]]=arguments[2]})),e},objToUrlParams:function(t){var e="";return $.each(t,(function(r){e+="&"+r+"="+t[r]})),e.substr(1)},parseKeyValue:t=>"Array"!==Object.prototype.toString.call(t).slice(8,-1)?[]:t.reduce((function(t,e){var r=e.replace(/\s+/g,"").split(":"),n=r[0],o=r[1].split(",").reduce((function(t,e){return t?i(i({},t),{},{[e]:n}):{[e]:n}}),"");return t?i(i({},t),o):o}),""),getPluginId:t=>"CSDNPlugin-".concat(t?t+"_":"").concat(a(8),"-").concat(+new Date,"-").concat(a(8))}},614:function(t,e,r){},615:function(t,e,r){t.exports=r.p+"images/newTab/assets/img/plugin-icon.png"},740:function(t,e,r){t.exports=r.p+"images/newTab/assets/img/upload-img.png"},741:function(t,e,r){t.exports=r.p+"images/newTab/assets/img/upload-img/rotate_left.png"},742:function(t,e,r){t.exports=r.p+"images/newTab/assets/img/upload-img/rotate_right.png"},743:function(t,e,r){t.exports=r.p+"images/newTab/assets/img/upload-img/scale_plus.png"},744:function(t,e,r){t.exports=r.p+"images/newTab/assets/img/upload-img/scale_reduce.png"},745:function(t,e,r){t.exports=r.p+"images/newTab/assets/img/upload-img/refresh.png"},746:function(t,e,r){"use strict";r(614)}}]);